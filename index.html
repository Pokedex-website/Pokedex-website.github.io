<!DOCTYPE html>
<html>
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZS9N2HTN2L"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-ZS9N2HTN2L');
    </script>
    <meta name="google-site-verification" content="yhnyDOWzzg-Pf9vx1xneBkgqYJ_UjSdOmbqwvJ1cfNo" />
    <link rel="manifest" href="/Favicon/dunplab-manifest-18116.json">
    <link rel="apple-touch-icon" sizes="57x57" href="/Favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/Favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/Favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/Favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/Favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/Favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/Favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/Favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/Favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/Favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/Favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/Favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/Favicon/favicon-16x16.png">
    <link rel="manifest" href="/Favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#0000ff">
    <meta name="msapplication-TileImage" content="/Favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#0000ff">
    <meta charset="UTF-8">
    <title>Hostedposted's Pokedex</title>
    <link rel="stylesheet" href="pokemon.css" />
</head>
<body style="padding: 20px">
<h1 class="title">Hostedposted's Pokedex</h1>
<button id = update>Update To Newest Version, <br>You Will Need To Reload After Using</button>
<form action="https://github.com/Pokedex-website/Pokedex-website.github.io">
    <input type="submit" id = submiter value="Go to Source code" />
</form>
<div class="tabContainer">
    <div class="buttonContainer">
        <button onclick="showPanel(0,'#0000FF')">Pokemon</button>
        <button onclick="showPanel(1,'#0000FF')">Berries</button>
        <button onclick="showPanel(2,'#0000FF')">Moves</button>
    </div>
    <div class="tabPanel"><link
        href="https://fonts.googleapis.com/css?family=Rubik&display=swap"
        rel="stylesheet"
    />
</head>
<body>
    <div class="container">
        <h1>Pokemon Pokedex</h1>
        <input id = search type=“text” placeholder="Type here to search by pokemon name">
        <button id = clearbut> Main menu</button>
        <button id = searchbut></button>
        <ol id="pokedex"></ol>
    </div>
    <script>
    document.getElementById("searchbut").addEventListener("click", function() {
        const searcher = document.getElementById("search").value.toLowerCase()
        for (const pokeman of pokemon) {document.getElementById(pokeman.name).style.display = ""}
        for (const pokeman of pokemon) {
            if (!pokeman.name.startsWith(searcher))
            {document.getElementById(pokeman.name).style.display = "none"}
        }
    });



    document.getElementById("clearbut").addEventListener("click", function() {
        document.getElementById("search").value = "";
        document.getElementById("searchbut").click();
    });

    var input = document.getElementById("search");

    var i;

    input.addEventListener("keyup", function(event) {
        for (i = 0; i < 226; i++) {
            if (event.keyCode === i) {
            
            event.preventDefault();
            
            document.getElementById("searchbut").click();
            };
        };
    }
    );

    
    


    const pokedex = document.getElementById('pokedex');
    const cachedPokemon = {};
    const cachedEvolution = {};
    let pokemon
        const fetchPokemon = () => {
            const promises = [];
            const url = 'info.json'
            fetch(url).then((res) => res.json()).then((results)  => {
                const url = "gen8.json";
                fetch(url).then((res) => res.json()).then((gen8pokemon) => {
                    results.sort((a, b) => (a.id - b.id))
                    pokemon = results.map((result) => ({
                        name: result.name,
                        image: `/pokemon/${result.id}.png`,
                        type: result.types.map((type) => type.type.name).join(', '),
                        id: result.id,
                        ability: result.abilities.map((ability) => ability.ability.name).join(', ') || gen8pokemon[result.id-808].abilities.join(', ')
                    }));
                    displayPokemon(pokemon);
                });
            });
        };
            
        
        const displayPokemon = (pokemon) => {
            const pokemonHTMLString = pokemon
                .map(
                    (pokeman) => `
                <li class="card" id = "${pokeman.name}" onclick = "selectPokemon(${pokeman.id})">
                    <img class="card-image" src="${pokeman.image}"/>
                    <h2 class="card-title">${pokeman.id}. ${pokeman.name}</h2>
                    <p class="card-subtitle">Type: ${pokeman.type} <br> Ability: ${pokeman.ability} </p>
                </li>
            `
                )
                .join('');
            pokedex.innerHTML = pokemonHTMLString;
        };
        
        fetchPokemon();

        const selectPokemon = async (id) => {
            if (!cachedPokemon[id]) {
                const url = `https://pokeapi.co/api/v2/pokemon/${id}`;
                const res = await fetch(url);
                const pokeman = await res.json();
                const moveUrls = pokeman.moves.map(move => move.move.url);
                const results = await Promise.all(moveUrls.map(url => fetch(url)));
                const moves = await Promise.all(results.map(res => res.json()));
                const urlf = `https://pokeapi.co/api/v2/pokemon-species/${id}`;
                const resf = await fetch(urlf);
                const pokemanf = await resf.json();
                const evoU = pokemanf.evolution_chain.url;
                const rese = await fetch(evoU);
                const evolution = await rese.json();
                cachedPokemon[id] = pokeman;
                cachedEvolution[id] = evolution;
                displayPokemanPopup(pokeman, evolution);
            } else {
                displayPokemanPopup(cachedPokemon[id], cachedEvolution[id]);
            }
        };

        function displayMove(url) {
            fetch(url).then((res) => res.json()).then((move)  => {
                const htmlString = move.effect_entries.map((short_effect) => short_effect.short_effect).join(', ').replace('$effect_chance', move.effect_chance);
                const popmove = document.getElementById(move.name)
                if (popmove.innerHTML != '') {
                    popmove.innerHTML = ''
                }
                else {
                    popmove.innerHTML = htmlString + popmove.innerHTML
                }
                
        });
        }

        
        const displayPokemanPopup = (pokeman, evolution) => {
            const url = "gen8.json";
            fetch(url).then((res) => res.json()).then((gen8pokemon) => {
            document.body.style.overflow = 'hidden';
            const url7 = "pokedex.json";
            fetch(url7).then((res) => res.json()).then((desc) => {
            const type = pokeman.types.map((type) => type.type.name).join(', ');
            const stats = pokeman.stats.map((stat) =>
                `${stat.stat.name}: ${stat.base_stat}`
            ).join('<br>');
            const movers = pokeman.id < 808 ?
                `Moves ${pokeman.name} can learn are: <br> ${pokeman.moves.map((move) =>
                    `${move.move.name} <button id="details" type="button" onclick="displayMove('${move.move.url}')">Details</button><div id = "${move.move.name}"></div>`
                ).join('')}` :  ``

            const ability = pokeman.abilities.map((ability) => ability.ability.name).join(', ') || gen8pokemon[pokeman.id-808].abilities.join(', ')
            const description = pokeman.id < 808 ?
                `Description: <br>${desc[pokeman.id-1].description}` : pokeman.id < 891 ?
                `Description: <br>${gen8pokemon[pokeman.id-808].description}` : ``
            const species = pokeman.id < 810 ?
                    `Species: <br>${desc[pokeman.id-1].species}<br>` : ``
            const evolchain = evolution.chain.evolves_to[0] == undefined ?
                `Evolution chain: ${evolution.chain.species.name}` : evolution.chain.evolves_to[0].evolves_to[0] == undefined ?
                `Evolution chain: ${evolution.chain.species.name}, ${evolution.chain.evolves_to[0].species.name}` : `Evolution chain: ${evolution.chain.species.name}, ${evolution.chain.evolves_to[0].species.name}, ${evolution.chain.evolves_to[0].evolves_to[0].species.name}`
            const htmlString = `
                <div class="popup">
                    <button id="closeBtn" onclick="closePopup()">Close</button>
                    <div class="card">
                        <img class="card-image" src="/pokemon/${pokeman.id}.png"/>
                        <img class="card-image" src="/pokemon/shiny/${pokeman.id}.png"/>
                        <h2 class="card-title">${pokeman.id}. ${pokeman.name}</h2>
                        <p>Type: ${type} <br>Height in decimetres: ${pokeman.height}<br> Weight in hectograms: ${
                pokeman.weight
            }<br> Abilities: ${ability}<br> Base Stats: <br>${stats}<br>${species}${description}<br>${evolchain}<br>${movers}</p>
                    </div>
                </div>
            `;
            pokedex.innerHTML = htmlString + pokedex.innerHTML;
            })
            })
        };
        
        const closePopup = () => {
            document.body.style.overflow = '';
            const popup = document.querySelector('.popup');
            popup.parentElement.removeChild(popup);
        };

        fetchPokemon();

        </script>
        <h3>Copyright © 2020 <a href="https://Pokedex.website/">Pokedex website</a> - All Rights Reserved.<br>Thanks to <a href="https://PokeApi.co/">PokeApi</a>.<br>All content is © Nintendo, Game Freak, and The Pokémon Company.</h3></div>
    
    <div class="tabPanel"><!DOCTYPE html>
        <html lang="en">
            <head>
                <meta charset="UTF-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <meta http-equiv="X-UA-Compatible" content="ie=edge" />
                <title>Hostedposted's Pokedex</title>
            </head>
            <body>
                <div class="container">
                    <h1>Berry Pokedex</h1>
                    <input id = search1 type=“text” placeholder="Type here to search by a berries name">
                    <button id = searchbut1></button>
                    <button id = clearbut1> Main menu</button>
                    <ol id="pokedex1"></ol>
                </div>
                <script> 
                        document.getElementById("searchbut1").addEventListener("click", function() {
                            const searcher1 = document.getElementById("search1").value.toLowerCase()
                            for (const pokeman of berries) {document.getElementById(pokeman.name).style.display = ""}
                            for (const pokeman of berries) {
                                if (!pokeman.name.startsWith(searcher1))
                                {document.getElementById(pokeman.name).style.display = "none"}
                            }
                        });



                        document.getElementById("clearbut1").addEventListener("click", function() {
                            document.getElementById("search1").value = "";
                            document.getElementById("searchbut1").click();
                        });

                        var input = document.getElementById("search1");


                        input.addEventListener("keyup", function(event) {
                            for (i = 0; i < 226; i++) {
                                if (event.keyCode === i) {
                                
                                event.preventDefault();
                                
                                document.getElementById("searchbut1").click();
                                };
                            };
                        }
                        );

                    const pokedex1 = document.getElementById('pokedex1');

                    let berries;

                    const fetchPokemon1 = () => {
                        const promises = [];
                        for (let i = 1; i <= 64; i++) {
                            const url1 = `https://pokeapi.co/api/v2/berry/${i}`;
                            promises.push(fetch(url1).then((res) => res.json()));
                        }
                        Promise.all(promises).then((results) => {
                            berries = results.map((result) => ({
                                name: result.name,
                                firmness: result.firmness.name,
                                natural_gift_type: result.natural_gift_type.name,
                                natural_gift_power: result.natural_gift_power,
                                id: result.id,
                                effect_chance: result.effect_chance,
                            }))
                            displayPokemon1(berries);
                        });
                    };
                    
                    const displayPokemon1 = (pokemon) => {
                        const pokemonHTMLString = pokemon
                            .map(
                                (pokeman) => `
                            <li class="card" id = "${pokeman.name}">
                                <img class="card-image" src="https://raw.githubusercontent.com/hostedposted/Pokedex-data/main/${pokeman.id}.png"/>
                                <h2 class="card-title">${pokeman.name}</h2>
                                <p class="card-subtitle">Firmness: ${pokeman.firmness} <br> Natural Gift Type: ${pokeman.natural_gift_type} <br> Natural Gift Power: ${pokeman.natural_gift_power} </p>
                            </li>
                        `
                            )
                            .join('');
                        pokedex1.innerHTML = pokemonHTMLString;
                    };
                    
                    fetchPokemon1();
                    </script>
                    <h3>Copyright © 2020 <a href="https://Pokedex.website/">Pokedex website</a> - All Rights Reserved.<br>Thanks to <a href="https://PokeApi.co/">PokeApi</a>.<br>All content is © Nintendo, Game Freak, and The Pokémon Company.</h3>
            </body>
        </html></div>
        <div class="tabPanel"><!DOCTYPE html>
            <html lang="en">
                <head>
                    <meta charset="UTF-8" />
                    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
                    <title>Hostedposted's Pokedex</title>
                </head>
                <body>
                    <div class="container">
                        <h1>Move Pokedex</h1>
                        <input id = search2 type=“text” placeholder="Type here to search by moves">
                        <button id = searchbut2></button>
                        <button id = clearbut2> Main menu</button>
                        <ul id="pokedex2"></ul>
                    </div>
                    <script>
                            document.getElementById("searchbut2").addEventListener("click", function() {
                            const searcher2 = document.getElementById("search2").value.toLowerCase()
                            for (const pokeman of moves) {document.getElementById(pokeman.name).style.display = ""}
                            for (const pokeman of moves) {
                                if (!pokeman.name.startsWith(searcher2))
                                {document.getElementById(pokeman.name).style.display = "none"}
                            }
                        });



                        document.getElementById("clearbut2").addEventListener("click", function() {
                            document.getElementById("search2").value = "";
                            document.getElementById("searchbut2").click();
                        });

                        var input = document.getElementById("search2");


                        input.addEventListener("keyup", function(event) {
                            for (i = 0; i < 226; i++) {
                                if (event.keyCode === i) {
                                
                                event.preventDefault();
                                
                                document.getElementById("searchbut2").click();
                                };
                            };
                        }
                        );


                        const pokedex2 = document.getElementById('pokedex2');
                        
                        let moves;


                        const fetchPokemon2 = () => {
                            const promises = [];
                            for (let i = 1; i <= 784; i++) {
                                const url2 = `/move/${i}/index.json`;
                                promises.push(fetch(url2).then((res) => res.json()));
                            }

                            Promise.all(promises).then((results) => {
                                moves = results.map((result) => ({
                                    name: result.name,
                                    pp: result.pp,
                                    accuracy: result.accuracy || "Never Fails",
                                    priority: result.priority,
                                    power: result.power || 0,
                                    effect: result.effect_entries.map((short_effect) => short_effect.short_effect).join(', ').replace('$effect_chance', result.effect_chance),
                                    effect_chance: result.effect_chance,
                                    type: result.type.name,
                                    id: result.id,
                                }));
                                displayPokemon2(moves);
                            });
                        };
                        
                        const colors = {
                            "ground": "#CC9F4F",
                            "fire": "#EA7A3C",
                            "grass": "#71C558",
                            "fairy": "#E397D1",
                            'normal': "#AAB09F",
                            'fighting': "#CB5F48",
                            'ice': "#70CBD4",
                            'electric': "#E5C531",
                            'flying': "#7DA6DE",
                            'poison': "#B468B7",
                            'bug': "#94BC4A",
                            'dark': "#736C75",
                            'water': "#539AE2",
                            'psychic': "#E5709B",
                            "rock": "#B2A061",
                            "ghost": "#846AB6",
                            "dragon": "#6A7BAF",
                            "steel": "#B7B7CE",
                        }

                        const displayPokemon2 = (moves) => {
                            const pokemonHTMLString = moves
                                .map(
                                    (pokeman) => `
                                <li class="move" id = "${pokeman.name}" style = "background-color: ${colors[pokeman.type]};">
                                    <h2 class="card-title">${pokeman.name}</h2>
                                    <p class="move-subtitle">PP: ${pokeman.pp} <br> Accuracy: ${pokeman.accuracy} <br> Priority: ${pokeman.priority} <br> Power: ${pokeman.power} <br> Effect: ${pokeman.effect} <br> Move type: ${pokeman.type}</p>
                                </li>
                            `
                                )
                                .join('');
                            pokedex2.innerHTML = pokemonHTMLString;
                        };
                        
                        fetchPokemon2();
                        </script>
                        <h3>Copyright © 2020 <a href="https://Pokedex.website/">Pokedex website</a> - All Rights Reserved.<br>Thanks to <a href="https://PokeApi.co/">PokeApi</a>.<br>All content is © Nintendo, Game Freak, and The Pokémon Company.</h3>
                </div>
                </div>
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js').then(function(registration) {
    // registration worked
    console.log('Registration succeeded.');
    update.onclick = function() {
      registration.update();
    }
  }).catch(function(error) {
    // registration failed
    console.log('Registration failed with ' + error);
  });
};
    var tabButtons=document.querySelectorAll(".tabContainer .buttonContainer button");
    var tabPanels=document.querySelectorAll(".tabContainer  .tabPanel");
    
    function showPanel(panelIndex,colorCode) {
        tabButtons.forEach(function(node){
            node.style.backgroundColor="";
            node.style.color="";
        });
        tabButtons[panelIndex].style.backgroundColor=colorCode;
        tabButtons[panelIndex].style.color="white";
        tabPanels.forEach(function(node){
            node.style.display="none";
        });
        tabPanels[panelIndex].style.display="block";
        tabPanels[panelIndex].style.backgroundColor=colorCode;
    }
    showPanel(0,'#0000FF');</script>
</body>
</html>